{% extends 'base.html' %}

{% block content %}

<h2>Create Post</h2>

<form method="POST">
    {% csrf_token %}
    <textarea name="content" rows="3" cols="50"></textarea>
    <br>
    <button type="submit">Post</button>
</form>

<hr>

<h2>Your Feed</h2>

{% for post in posts %}
    <div>
        <strong>
            <a href="{% url 'profile' post.author.username %}">
                {{ post.author.username }}
            </a>
        </strong>

        <p>{{ post.content }}</p>

        <small>{{ post.created_at }}</small>
        <br>

        <form action="{% url 'like_post' post.id %}" method="POST" style="display:inline;">
            {% csrf_token %}
            {% if post.id in liked_posts %}
                <button type="submit">Unlike</button>
            {% else %}
                <button type="submit">Like</button>
            {% endif %}
        </form>

        <span>{{ post.likes.count }} Likes</span>

        <hr>
    </div>
{% endfor %}

{% if not posts %}
    <p>No posts to show. Follow some users to see their posts here!</p>
{% endif %}

{% endblock %}
